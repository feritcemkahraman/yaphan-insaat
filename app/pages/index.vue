<template>
  <!-- Banner bÃ¶lÃ¼mÃ¼ baÅŸlangÄ±cÄ± -->
  <div class="w-full h-screen">
    <div class="relative h-[calc(100vh-4rem)] overflow-hidden">
      <div
        class="absolute w-full h-[130%] -top-[15%] left-0 parallax-container"
        :style="{
          transform: `translateY(${scrollPosition * 0.15}px)`,
          transition: 'transform 0.3s cubic-bezier(0.33, 1, 0.68, 1)',
        }"
      >
        <img
          class="object-cover w-full h-full"
          src="/banner.jpg"
          alt="yapihan banner"
        />
      </div>
      <div
        class="absolute inset-0 flex flex-col items-center justify-center mx-2 md:mx-0 text-white"
      >
        <div class="bg-black/40 backdrop-blur-sm p-8 rounded-lg max-w-6xl">
          <p class="text-lg mb-4 text-center">Y A P I H A N</p>
          <div class="text-center mb-12">
            <span class="text-3xl md:text-5xl font-bold">
              GÃ¼ven ve Kalite Ä°nÅŸa Ediyoruz.
            </span>
            <br />
            <br />
            <span class="text-xl"
              >Kaliteli ve gÃ¼venilir projeler hayata geÃ§irerek, inÅŸaat
              sektÃ¶rÃ¼nde saÄŸlam temeller atÄ±yor; her adÄ±mda mÃ¼ÅŸteri
              memnuniyetini Ã¶n planda tutarak uzun vadeli, gÃ¼vene dayalÄ±
              iliÅŸkiler Ã¼retmeyi amaÃ§lÄ±yoruz.</span
            >
          </div>
          <div class="text-center">
            <NuxtLink
              to="/hakkimizda"
              class="mt-4 px-10 py-2 border-2 rounded hover:backdrop-blur transition-all inline-block"
              >HakkÄ±mÄ±zda</NuxtLink
            >
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Banner bÃ¶lÃ¼mÃ¼ sonu -->

  <!--HakkÄ±mÄ±zda bÃ¶lÃ¼mÃ¼ baÅŸlangÄ±cÄ±-->
  <section class="py-20 md:pb-48 w-full">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        <!-- Image Section -->
        <div class="relative min-h-[400px]">
          <div class="relative h-full">
            <!-- First Image -->
            <NuxtImg
              src="/serenity-villa.webp"
              alt="About 1"
              class="absolute w-3/5 h-4/5 object-cover will-change-transform"
              :style="{
                transform: firstImageTransform,
                transition: 'transform 0.6s cubic-bezier(0.33, 1, 0.68, 1)',
              }"
              loading="lazy"
            />
            <!-- Second Image -->
            <NuxtImg
              src="/yapihan-hakkinda-section.jpg"
              alt="About 2"
              class="absolute w-3/5 h-4/5 object-cover mt-[20%] ml-[40%] will-change-transform"
              :style="{
                transform: secondImageTransform,
                transition: 'transform 0.6s cubic-bezier(0.33, 1, 0.68, 1)',
              }"
              loading="lazy"
            />
            <!-- Decorative Border -->
            <div
              class="absolute w-3/5 h-4/5 top-[10%] left-[20%] border-4 border-blue-600 -z-10"
            />
          </div>
        </div>

        <!-- Content Section -->
        <div>
          <h4 class="text-blue-600 font-bold mb-2">HakkÄ±mÄ±zda</h4>
          <h1 class="text-4xl md:text-3xl font-bold mb-6">
            GeleceÄŸi Ä°nÅŸa Ediyoruz. <br />
            Vizyonumuz doÄŸrultusunda, sektÃ¶rde kalÄ±cÄ± deÄŸerler yaratmayÄ±
            amaÃ§lÄ±yoruz.
          </h1>
          <p class="mb-4">
            YapÄ±Han olarak, belirlediÄŸimiz vizyon ve misyon doÄŸrultusunda
            Ã§alÄ±ÅŸmalarÄ±mÄ±za yÃ¶n veriyor, sektÃ¶rde kalÄ±cÄ± ve olumlu izler
            bÄ±rakmayÄ± hedefliyoruz. GÃ¼Ã§lÃ¼ ekibimiz ve deÄŸerlerimizle, geleceÄŸe
            gÃ¼venle bakÄ±yoruz.
          </p>
          <p class="mb-8">
            YenilikÃ§i Ã§Ã¶zÃ¼mlerimiz ve sÃ¼rdÃ¼rÃ¼lebilir projelerimizle, mÃ¼ÅŸteri
            memnuniyetini en Ã¼st dÃ¼zeyde tutmayÄ±, sektÃ¶rde Ã¶rnek alÄ±nan bir
            marka olmayÄ± ve topluma deÄŸer katan Ã§alÄ±ÅŸmalara imza atmayÄ±
            hedefliyoruz. GÃ¼ven, kalite ve dÃ¼rÃ¼stlÃ¼k ilkelerimizle hareket
            ederek, geleceÄŸi birlikte inÅŸa ediyoruz.
          </p>

          <!-- Experience Counter -->
          <div class="flex items-center ml-10 md:ml-0 mb-16 md:mb-16">
            <div
              ref="counterRef"
              class="flex items-center justify-center border-4 border-blue-600 w-32 h-32"
            >
              <span class="text-6xl font-bold">{{ counter }}+</span>
            </div>
            <div class="ml-6">
              <h3 class="text-2xl font-bold">{{ text1 }}</h3>
              <h3 class="text-2xl font-bold">{{ text2 }}</h3>
              <h3 class="text-2xl font-bold">{{ text3 }}</h3>
            </div>
          </div>

          <!-- CTA Button -->
          <NuxtLink
            to="/hakkimizda"
            class="bg-blue-600 text-white ml-28 md:ml-0 px-8 py-4 rounded hover:bg-blue-700 transition-colors"
          >
            Daha Fazla
          </NuxtLink>
        </div>
      </div>
    </div>
  </section>
  <!--HakkÄ±mÄ±zda bÃ¶lÃ¼mÃ¼ sonu-->

  <!-- Planlama bÃ¶lÃ¼mÃ¼ baÅŸlangÄ±cÄ± -->
  <div class="relative">
    <!-- Arka plan gÃ¶rseli - height ayarlandÄ± -->
    <div
      class="absolute top-0 left-0 w-full h-[38vh] bg-cover bg-center z-0"
      :style="{
        backgroundImage: `url('/services.webp')`,
        backgroundColor: 'rgba(0, 0, 0, 0.6)',
      }"
    ></div>

    <!-- Ä°Ã§erik -->
    <div class="relative z-10 px-4 py-16 mx-auto max-w-7xl">
      <!-- Ãœst baÅŸlÄ±k -->
      <div class="text-center mb-16">
        <p
          class="text-white font-semibold text-sm uppercase tracking-wider mb-4"
        >
          NELER YAPIYORUZ
        </p>
        <h2 class="text-white text-3xl md:text-4xl font-bold">
          Sizlere mÃ¼kemmeli sunmak iÃ§in hiÃ§bir detayÄ± atlamÄ±yoruz.
        </h2>
      </div>

      <!-- Kartlar -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Planlama KartÄ± -->
        <div class="bg-white p-8 rounded-lg shadow-lg hover:shadow-2xl">
          <div class="text-center">
            <div class="text-4xl mb-4">ğŸ“</div>
            <h3 class="text-xl font-bold mb-4">Planlama</h3>
            <p class="text-gray-600 leading-relaxed">
              BaÅŸarÄ±lÄ± projeler iÃ§in doÄŸru planlama yapmanÄ±n Ã¶neminin
              farkÄ±ndayÄ±z. Bu nedenle, her proje Ã¶ncesinde detaylÄ± analizler ve
              stratejik deÄŸerlendirmelerle saÄŸlam bir yapÄ± kuruyoruz.
            </p>
          </div>
        </div>

        <!-- Ä°Ã§ Mekan KartÄ± -->
        <div class="bg-white p-8 rounded-lg shadow-lg hover:shadow-2xl">
          <div class="text-center">
            <div class="text-4xl mb-4">ğŸ›‹</div>
            <h3 class="text-xl font-bold mb-4">Ä°Ã§ Mekan</h3>
            <p class="text-gray-600 leading-relaxed">
              Ä°Ã§ mekan tasarÄ±mÄ±nda, mÃ¼ÅŸterilerimizin ihtiyaÃ§larÄ±nÄ± ve yaÅŸam
              tarzlarÄ±nÄ± en iyi ÅŸekilde yansÄ±tacak Ã§Ã¶zÃ¼mler sunuyoruz. Konfor ve
              iÅŸlevselliÄŸi bir araya getirerek, gÃ¶z alÄ±cÄ± alanlar oluÅŸturuyoruz.
            </p>
          </div>
        </div>

        <!-- DÄ±ÅŸ Mekan KartÄ± -->
        <div class="bg-white p-8 rounded-lg shadow-lg hover:shadow-2xl">
          <div class="text-center">
            <div class="text-4xl mb-4">ğŸ </div>
            <h3 class="text-xl font-bold mb-4">DÄ±ÅŸ Mekan</h3>
            <p class="text-gray-600 leading-relaxed">
              YapÄ±larÄ±mÄ±zÄ±n dÄ±ÅŸ gÃ¶rÃ¼nÃ¼ÅŸÃ¼nde saÄŸlamlÄ±k ve zarafeti birleÅŸtirerek,
              Ã§evreye deÄŸer katan bir mimari yaklaÅŸÄ±mÄ± benimsiyoruz. YapHan
              olarak, dÄ±ÅŸ cephedeki her detayla kalÄ±cÄ± izler bÄ±rakmayÄ±
              hedefliyoruz.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Planlama bÃ¶lÃ¼mÃ¼ sonu -->

  <!-- Son Projeler BÃ¶lÃ¼mÃ¼ BaÅŸlangÄ±cÄ± -->
  <section class="py-16 px-4 max-w-7xl mx-auto">
    <!-- BaÅŸlÄ±k -->
    <div class="mb-12">
      <p class="text-gray-600 text-sm uppercase tracking-wider mb-2">
        SON PROJELERÄ°MÄ°Z
      </p>
      <h2 class="text-3xl md:text-4xl font-bold">
        Son projelerimizden bazÄ±larÄ±na gÃ¶z atÄ±n.
      </h2>
    </div>

    <!-- Projeler -->
    <div class="space-y-20">
      <!-- Lumina VillalarÄ± -->
      <div class="flex flex-col md:flex-row gap-8 items-center">
        <div class="md:w-2/3">
          <img
            src="/lumina-villa.jpg"
            alt="Lumina VillalarÄ±"
            class="w-full h-[400px] object-cover rounded-lg shadow-lg"
          />
        </div>
        <div class="md:w-1/3 md:ml-10">
          <h3 class="text-4xl font-bold mb-4">Lumina VillalarÄ±</h3>
          <p class="text-gray-600 mb-6">
            Projenin mimarisi, elit yaÅŸamÄ±n iÃ§in tasarlanmÄ±ÅŸ ÅŸÄ±klÄ±n, estetik
            alanlarÄ±n yanÄ± sÄ±ra ÅŸÄ±k ve davetkar karÅŸÄ±lama alanlarÄ±ndan oluÅŸan
            bir villann tamamlayÄ±cÄ± Ã¶zelliklerini ifade etmektedir.
          </p>
          <a
            href="#"
            class="inline-flex items-center text-black border-2 px-5 py-2 border-gray-600 rounded hover:opacity-75 transition-opacity"
          >
            Ä°ncele
            <svg
              class="w-4 h-4 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"
              />
            </svg>
          </a>
        </div>
      </div>

      <hr class="my-6 sm:mx-auto border-gray-400 lg:my-8" />

      <!-- Villa Luxoria -->
      <div class="flex flex-col md:flex-row gap-8 items-center">
        <div class="md:w-1/3 md:mr-10">
          <h3 class="text-4xl font-bold mb-4">Villa Luxoria</h3>
          <p class="text-gray-600 mb-6">
            Projenin mimarisi, elit yaÅŸamÄ±n iÃ§in tasarlanmÄ±ÅŸ ÅŸÄ±klÄ±n, estetik
            alanlarÄ±n yanÄ± sÄ±ra ÅŸÄ±k ve davetkar karÅŸÄ±lama alanlarÄ±ndan oluÅŸan
            bir villanÄ±n tamamlayÄ±cÄ± Ã¶zelliklerini ifade etmektedir.
          </p>
          <a
            href="#"
            class="inline-flex items-center text-black border-2 px-5 py-2 border-gray-600 rounded hover:opacity-75 transition-opacity"
          >
            Ä°ncele
            <svg
              class="w-4 h-4 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"
              />
            </svg>
          </a>
        </div>
        <div class="md:w-2/3">
          <img
            src="/luxoria-villa.jpg"
            alt="Villa Luxoria"
            class="w-full h-[400px] object-cover rounded-lg shadow-lg"
          />
        </div>
      </div>

      <hr class="my-6 sm:mx-auto border-gray-400 lg:my-8" />

      <!-- Serenity VillalarÄ± -->
      <div class="flex flex-col md:flex-row gap-8 items-center">
        <div class="md:w-2/3">
          <img
            src="/serenity-villa.webp"
            alt="Serenity VillalarÄ±"
            class="w-full h-[400px] object-cover rounded-lg shadow-lg"
          />
        </div>
        <div class="md:w-1/3 md:ml-10">
          <h3 class="text-4xl font-bold mb-4">Serenity VillalarÄ±</h3>
          <p class="text-gray-600 mb-6">
            Projenin mimarisi, elit yaÅŸamÄ±n iÃ§in tasarlanmÄ±ÅŸ ÅŸÄ±klÄ±n, estetik
            alanlarÄ±n yanÄ± sÄ±ra ÅŸÄ±k ve davetkar karÅŸÄ±lama alanlarÄ±ndan oluÅŸan
            bir villanÄ±n tamamlayÄ±cÄ± Ã¶zelliklerini ifade etmektedir.
          </p>
          <a
            href="#"
            class="inline-flex items-center text-black border-2 px-5 py-2 border-gray-600 rounded hover:opacity-75 transition-opacity"
          >
            Ä°ncele
            <svg
              class="w-4 h-4 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"
              />
            </svg>
          </a>
        </div>
      </div>

      <hr class="my-6 sm:mx-auto border-gray-400 lg:my-8" />
    </div>
  </section>
  <!-- Son Projeler BÃ¶lÃ¼mÃ¼ Sonu -->

  <!-- Ã‡Ã¶zÃ¼m OrtaklarÄ±mÄ±z BÃ¶lÃ¼mÃ¼ BaÅŸlangÄ±cÄ± -->

  <section class="relative py-16 px-4 w-full">
    <!-- Arka plan gÃ¶rseli -->
    <div
      class="absolute top-0 left-0 w-full h-[40vh] bg-cover bg-center z-0"
      style="
        background-image: url('/yapihancozumortaklari.jpg');
        background-color: rgba(0, 0, 0, 0.6);
        background-blend-mode: overlay;
      "
    ></div>

    <!-- Ä°Ã§erik -->
    <div class="relative z-10 max-w-7xl mx-auto">
      <!-- BaÅŸlÄ±k -->
      <div class="text-center mb-12">
        <p class="text-gray-300 text-sm uppercase tracking-wider mb-2">
          Ã‡Ã–ZÃœM ORTAKLARIMIZ
        </p>
        <h2 class="text-white text-3xl md:text-4xl font-bold">
          Ã‡Ã¶zÃ¼m ortaklarÄ±mÄ±zla kurduÄŸumuz gÃ¼Ã§lÃ¼ iÅŸ birlikleri sayesinde, her
          projede en yÃ¼ksek kaliteyi ve gÃ¼veni sunmayÄ± baÅŸarÄ±yoruz.
        </h2>
      </div>

      <!-- Logolar -->
      <div class="logo-slider">
        <div class="logo-track">
          <!-- Ä°lk set logolar -->
          <div
            v-for="logo in logos"
            :key="logo.id"
            class="logo-slide bg-white p-4 md:p-3 lg:p-2 rounded-lg shadow-lg flex items-center justify-center"
          >
            <img
              :src="logo.src"
              :alt="logo.alt"
              class="w-full h-auto object-contain max-h-24"
            />
          </div>
          <!-- KlonlanmÄ±ÅŸ set logolar -->
          <div
            v-for="logo in logos"
            :key="'clone-' + logo.id"
            class="logo-slide bg-white p-4 md:p-3 lg:p-2 rounded-lg shadow-lg flex items-center justify-center"
          >
            <img
              :src="logo.src"
              :alt="logo.alt"
              class="w-full h-auto object-contain max-h-24"
            />
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Ã‡Ã¶zÃ¼m OrtaklarÄ±mÄ±z BÃ¶lÃ¼mÃ¼ Sonu -->
  <hr class="my-12 border-white" />
</template>

<script setup lang="ts">
import { useSeo } from "../../composables/useSeo";

const { setSeo } = useSeo();

setSeo({
  title:
    "YapHan Ä°nÅŸaat - GÃ¼ven ve Kalite Ä°nÅŸa Ediyoruz | Ä°stanbul'da LÃ¼x Villa Projeleri ve LÃ¼ks Konut Projeleri",
  description:
    "YapHan Ä°nÅŸaat ile hayalinizdeki projeyi gerÃ§eÄŸe dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n. Ä°stanbul'da 20 yÄ±lÄ± aÅŸkÄ±n tecrÃ¼bemizle, modern ve lÃ¼ks konut projeleri, ticari yapÄ±lar inÅŸa ediyoruz.",
  keywords:
    "yaphan inÅŸaat, istanbul lÃ¼ks konut projeleri, gÃ¼venilir mÃ¼teahhit, modern konut projeleri, ticari yapÄ±lar, inÅŸaat firmasÄ± istanbul",
  image: "/banner.webp",
  schema: {
    "@context": "https://schema.org",
    "@type": "Organization",
    name: "YapHan Ä°nÅŸaat",
    description:
      "Ä°stanbul'da 10 yÄ±lÄ± aÅŸkÄ±n tecrÃ¼besiyle lÃ¼ks villa projeleri ve lÃ¼ks konut projeleri ve ticari yapÄ±lar inÅŸa eden gÃ¼venilir inÅŸaat firmasÄ±",
    url: "https://yaphan.com.tr",
    address: {
      "@type": "PostalAddress",
      addressLocality: "Ä°stanbul",
      addressCountry: "TR",
    },
    contactPoint: {
      "@type": "ContactPoint",
      telephone: "+90-XXX-XXX-XXXX",
      contactType: "yapihan insaat bilgi",
    },
  },
});

const counter = ref(0);
const counterRef = ref(null);
const text1 = ref("");
const text2 = ref("");
const text3 = ref("");
const targetValue = 10;
const duration = 2000;
const hasAnimated = ref(false);

const typeWriter = async (
  text: string,
  targetRef: Ref<string>,
  delay: number = 100
) => {
  const chars = text.split("");
  for (let i = 0; i < chars.length; i++) {
    await new Promise((resolve) => setTimeout(resolve, delay));
    targetRef.value += chars[i];
  }
};

const startTypeWriter = async () => {
  text1.value = "";
  text2.value = "";
  text3.value = "";

  await typeWriter("YÄ±llÄ±k", text1);
  await typeWriter("SektÃ¶r", text2);
  await typeWriter("TecrÃ¼besiyle", text3);
};

const startCounter = () => {
  if (hasAnimated.value) return;

  const startTime = Date.now();
  const updateCounter = () => {
    const currentTime = Date.now();
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / duration, 1);

    counter.value = Math.floor(progress * targetValue);

    if (progress < 1) {
      requestAnimationFrame(updateCounter);
    }
  };

  updateCounter();
  startTypeWriter();
  hasAnimated.value = true;
};

const logos = [
  { id: 1, src: "/turkuaz-logo.png", alt: "Turkuaz" },
  { id: 2, src: "/segna-logo.png", alt: "Segna" },
  { id: 3, src: "/integral-logo.png", alt: "Integral" },
  { id: 4, src: "/ahlatci-logo.png", alt: "Ahlatci" },
  { id: 5, src: "/ah-enerji-logo.png", alt: "AH Enerji" },
  { id: 6, src: "/uzay-logo.png", alt: "Uzay" },
];

const targetScrollPosition = ref(0);
const scrollPosition = ref(0);

// Smooth scroll position update
const updateScrollPosition = () => {
  const currentScroll = window.scrollY;
  targetScrollPosition.value = currentScroll;

  const lerp = (start: number, end: number, factor: number) => {
    return start + (end - start) * factor;
  };

  scrollPosition.value = lerp(
    scrollPosition.value,
    targetScrollPosition.value,
    0.1
  );

  requestAnimationFrame(updateScrollPosition);
};

const firstImageTransform = computed(() => {
  const maxMove = 30;
  const movement = -scrollPosition.value * 0.02;
  return `translateY(${Math.max(-maxMove, Math.min(movement, maxMove))}px)`;
});

const secondImageTransform = computed(() => {
  const maxMove = 30;
  const movement = scrollPosition.value * 0.02;
  return `translateY(${Math.max(-maxMove, Math.min(movement, maxMove))}px)`;
});

onMounted(() => {
  updateScrollPosition();
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          startCounter();
          observer.disconnect();
        }
      });
    },
    { threshold: 0.5 }
  );

  if (counterRef.value) {
    observer.observe(counterRef.value);
  }

  const handleScroll = () => {
    requestAnimationFrame(() => {
      targetScrollPosition.value = window.scrollY;
    });
  };

  window.addEventListener("scroll", handleScroll, { passive: true });

  onUnmounted(() => {
    window.removeEventListener("scroll", handleScroll);
  });
});
</script>

<style scoped>
.parallax-container {
  will-change: transform;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}
.logo-slider {
  overflow: hidden;
  white-space: nowrap;
  position: relative;
}

.logo-track {
  display: inline-flex;
  animation: scroll 20s linear infinite;
}

.logo-track:hover {
  animation-play-state: paused;
}

.logo-slide {
  flex: 0 0 16.66%; /* 100% / 6 logos per row */
  box-sizing: border-box;
  margin: 0 10px;
}

@keyframes scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}
</style>
